<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub API Access</title>
</head>
<body>
    <h1> GitHub Rest API Tutorial</h1>
    <button id = 'btnRepos'>  Repos </Repos>
    <button id = 'btnIssues'>  Issues </Repos>
    <button id = 'btnCommits'>  Commits </Repos>
 
    


    <div id= 'divResult'>

    </div>
    <script>
        const btnRepos = document.getElementById("btnRepos")
        const btnIssues = document.getElementById("btnIssues")
        const btnCommits = document.getElementById("btnCommits")

        


        const divResult = document.getElementById("divResult")

        btnRepos.addEventListener("click", getRepos)
        btnIssues.addEventListener("click", getIssues)
        btnCommits.addEventListener("click", getCommits)
    

        async function getRepos(){

            const url = "https://api.github.com/search/repositories?q=stars:>100000"
            const response = await fetch(url)
            const result = await response.json()
            result.items.forEach(i=>{
                const anchor = document.createElement("a")
                anchor.href = i.html_url;
                anchor.textContent = i.full_name;
                divResult.appendChild(anchor)
                divResult.appendChild(document.createElement("br"))
            })

        }
        async function getIssues(){
            const url = "https://api.github.com/search/issues?q=author:raisedadead repo:freecodecamp/freecodecamp type:issue"
            const response = await fetch(url)
            const result = await response.json()
            result.items.forEach(i=>{

                const anchor = document.createElement("a")
                anchor.href = i.html_url;
                anchor.textContent = i.title;
                divResult.appendChild(anchor)
                divResult.appendChild(document.createElement("br"))
            })
            

        }

        async function getCommits(){

            const url = "https://api.github.com/search/commits?q=test repo:freecodecamp/freecodecamp"
            const headers = {
                "method" : "GET",
                "Accept" : "application/vnd.github.cloak-preview"
            }
            const response = await fetch(url, {
                "headers" : headers
            })
            const result = await response.json()
            result.items.forEach(i=>{
                const img = document.createElement("img")
                img.src = i.author.avatar_url;
                img.style.width = "32px"
                img.style.height = "32px"
                const anchor = document.createElement("a")
                anchor.href = i.html_url;
                anchor.textContent = i.commit.message;
                divResult.appendChild(img)
                divResult.appendChild(anchor)
                divResult.appendChild(document.createElement("br"))
            })

            }


        
        
    </script>
    
</body>
</html>
